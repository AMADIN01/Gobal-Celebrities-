<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Global Celebrities</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    :root{
      --bg:#0b0b0c;
      --panel:#141417;
      --muted:#9b9b9f;
      --accent:#ff6a00;
      --accent-2:#ff8a33;
      --ring: rgba(255,106,0,.35);
      --radius: 18px;
      --shadow: 0 10px 30px rgba(255,106,0,.12), 0 1px 0 rgba(255,255,255,.04) inset;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background: radial-gradient(1200px 800px at 10% -10%, rgba(255,106,0,.08), transparent 60%),
                  radial-gradient(1000px 700px at 110% 10%, rgba(255,106,0,.06), transparent 60%),
                  var(--bg);
      color:#fff;
    }
    header{
      position: sticky; top:0; z-index:10;
      backdrop-filter: blur(6px);
      background: linear-gradient(180deg, rgba(20,20,23,.92), rgba(20,20,23,.75));
      border-bottom: 1px solid rgba(255,255,255,.06);
    }
    .nav{max-width:1200px;margin:0 auto;padding:14px 18px;display:flex;align-items:center;gap:16px;}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;}
    .brand .logo{
      width:36px;height:36px;border-radius:50%;
      background: conic-gradient(from 210deg, var(--accent), var(--accent-2));
      box-shadow: 0 0 0 4px rgba(255,106,0,.15), 0 8px 30px rgba(255,106,0,.25);
    }
    .brand span{font-size:1.05rem;}
    .controls{margin-left:auto;display:flex;gap:10px;align-items:center;}
    .control{background:var(--panel);border:1px solid rgba(255,255,255,.06);color:#fff;border-radius:12px;padding:10px 12px;display:flex;align-items:center;gap:10px;box-shadow:var(--shadow);}
    .control input,.control select{background:transparent;border:none;outline:none;color:#fff;min-width:120px;}
    .control input::placeholder{color:#7d7d84;}
    main{max-width:1200px;margin:24px auto;padding:0 18px 80px;}
    .meta-bar{display:flex;align-items:center;justify-content:space-between;margin:8px 2px 16px;color:var(--muted);font-size:.95rem;}
    .grid{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));}
    .card{background:linear-gradient(180deg,rgba(255,106,0,.06),transparent 40%),var(--panel);border:1px solid rgba(255,255,255,.07);border-radius:var(--radius);overflow:hidden;position:relative;transform:translateY(8px);opacity:0;transition:transform .6s,opacity .6s;}
    .card.visible{transform:translateY(0);opacity:1;}
    .card:hover{box-shadow:0 14px 40px var(--ring);}
    .cover{width:100%;height:220px;object-fit:cover;display:block;background:#0f0f12;}
    .content{padding:14px 14px 16px;}
    .name{display:flex;align-items:center;gap:10px;}
    .name h3{margin:0;color:var(--accent);font-size:1.05rem;}
    .flag{width:20px;height:14px;border-radius:3px;object-fit:cover;border:1px solid rgba(255,255,255,.25);}
    .country{margin-top:6px;color:var(--muted);font-size:.9rem;}
    .links{display:flex;gap:12px;align-items:center;margin-top:12px;}
    .links a{color:var(--accent-2);font-size:1.25rem;transition:.2s;}
    .links a:hover{color:#fff;transform:translateY(-2px) scale(1.06);}
    .empty{text-align:center;color:var(--muted);padding:40px 12px;border:1px dashed rgba(255,255,255,.1);border-radius:12px;}
    .footer{position:fixed;inset:auto 0 0 0;background:linear-gradient(180deg,rgba(20,20,23,.6),rgba(20,20,23,.92));border-top:1px solid rgba(255,255,255,.07);backdrop-filter:blur(6px);}
    .footer .inner{max-width:1200px;margin:0 auto;padding:10px 18px;display:flex;align-items:center;gap:12px;color:var(--muted);font-size:.9rem;}
    .btn{cursor:pointer;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:var(--panel);color:#fff;}
    .btn:hover{box-shadow:0 8px 24px var(--ring);}
    .to-top{position:fixed;right:16px;bottom:78px;width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:var(--panel);border:1px solid rgba(255,255,255,.08);color:#fff;cursor:pointer;opacity:0;transform:translateY(8px);transition:.25s;}
    .to-top.visible{opacity:1;transform:translateY(0);}
    .loader{display:block;margin:22px auto 0;width:28px;height:28px;border-radius:50%;border:4px solid rgba(255,255,255,.08);border-top-color:var(--accent);animation:spin 1s linear infinite;}
    @keyframes spin{to{transform:rotate(360deg);}}
    .note{color:var(--muted);font-size:0.9rem;margin-top:10px;text-align:center;}

    /* ---- AD POPUP ---- */
    .ad-modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;justify-content:center;align-items:center;z-index:9999;}
    .ad-box{position:relative;width:min(420px,90vw);background:#000;border-radius:12px;box-shadow:0 12px 36px rgba(255,106,0,.45);overflow:hidden;}
    #adVideo{display:block;width:100%;height:auto;max-height:240px;background:#000;}
    .ad-close{position:fixed;top:20px;right:20px;background:rgba(0,0,0,.7);color:#fff;border:none;border-radius:50%;width:40px;height:40px;font-size:20px;cursor:pointer;z-index:10000;}
    .ad-close:hover{background:rgba(255,106,0,.85);}
    .ad-skip{position:absolute;top:8px;right:8px;background:#141417;color:#fff;border:1px solid rgba(255,255,255,.15);border-radius:999px;padding:6px 10px;font-size:14px;cursor:pointer;}
    .ad-skip[disabled]{opacity:.6;cursor:not-allowed;}
  </style>
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand"><div class="logo"></div><span>Global Celebrities</span></div>
      <label class="control"><i class="fa-solid fa-magnifying-glass"></i><input id="search" type="search" placeholder="Search name, country…" autocomplete="off"></label>
      <label class="control"><i class="fa-solid fa-flag"></i><select id="country"><option value="">All countries</option></select></label>
      <button id="reset" class="btn"><i class="fa-solid fa-rotate"></i></button>
    </div>
  </header>

  <main>
    <div class="meta-bar"><span id="count">Loading celebrities…</span><span id="activeFilters"></span></div>
    <div id="grid" class="grid" role="list" aria-live="polite"></div>
    <div id="loading" style="display:none"><div class="loader"></div><div class="note">Loading more celebrities…</div></div>
    <div id="empty" class="empty" style="display:none">No matches. Try a different search or clear filters.</div>
  </main>

  <div id="toTop" class="to-top"><i class="fa-solid fa-arrow-up"></i></div>

  <footer class="footer">
    <div class="inner"><span>© <span id="year"></span> Global Celebrities</span><span style="margin-left:auto">Dark theme • Orange accents</span></div>
  </footer>

  <!-- AD MODAL -->
  <div id="adModal" class="ad-modal" aria-hidden="true">
    <div class="ad-box">
      <button id="adSkip" class="ad-skip" disabled>Skip in <span id="adTimer">5</span>s</button>
      <video id="adVideo" autoplay muted playsinline controls>
        <source src="ads.mp4" type="video/mp4">
      </video>
    </div>
    <button id="adClose" class="ad-close" style="display:none">×</button>
  </div>

  <script>
    const DATA_URL = 'https://raw.githubusercontent.com/AMADIN01/celebrity-json/refs/heads/main/celebrities.json';
    const CHUNK_SIZE = 50, SCROLL_LOAD_OFFSET = 800;
    const el=(q,p=document)=>p.querySelector(q), els=(q,p=document)=>[...p.querySelectorAll(q)];
    const grid=el('#grid'),search=el('#search'),country=el('#country'),resetBtn=el('#reset'),count=el('#count'),empty=el('#empty'),toTop=el('#toTop'),activeFilters=el('#activeFilters'),loadingIndicator=el('#loading'),yearEl=el('#year');
    const FLAG_CDN=(code)=>`https://flagcdn.com/w40/${code}.png`;
    let DATA=[],FILTERED=[],renderIndex=0,loadingMore=false,io=null;
    function icon(n){return `<i class="fab fa-${n}"></i>`;}
    function socialLink(url,ic,label){if(!url)return'';return `<a href="${url}" target="_blank" rel="noopener">${icon(ic)}</a>`;}
    function cardHtml(it){const img=it.image||'',flag=it.flag?`<img class="flag" src="${FLAG_CDN(it.flag)}" alt="${it.country} flag" loading="lazy">`:'';return `<article class="card"><img class="cover" src="${img}" alt="${it.name}" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400/0e0e10/ffffff?text=No+Image'"/><div class="content"><div class="name"><h3>${it.name}</h3>${flag}</div><div class="country">${it.country}</div><div class="links">${socialLink(it.instagram,'instagram',it.name)}${socialLink(it.twitter,'twitter',it.name)}${socialLink(it.facebook,'facebook',it.name)}${socialLink(it.tiktok,'tiktok',it.name)}${socialLink(it.youtube,'youtube',it.name)}</div></div></article>`;}
    function renderNextChunk(){if(renderIndex>=FILTERED.length)return;const end=Math.min(renderIndex+CHUNK_SIZE,FILTERED.length);const slice=FILTERED.slice(renderIndex,end);const html=slice.map(cardHtml).join('');const container=document.createElement('div');container.innerHTML=html;while(container.firstChild){grid.appendChild(container.firstChild);}renderIndex=end;attachRevealObserver();updateMeta();if(renderIndex>=FILTERED.length){loadingIndicator.style.display='none';}loadingMore=false;}
    function resetRenderedGrid(){grid.innerHTML='';renderIndex=0;}
    function applyFilters(){const q=(search.value||'').trim().toLowerCase(),c=(country.value||'').toLowerCase();FILTERED=DATA.filter(it=>{const text=`${it.name} ${it.country}`.toLowerCase();return(!q||text.includes(q))&&(!c||it.country.toLowerCase()===c)});resetRenderedGrid();if(FILTERED.length===0){empty.style.display='block';loadingIndicator.style.display='none';}else{empty.style.display='none';loadingIndicator.style.display='block';renderNextChunk();}updateMeta();}
    function updateMeta(){count.textContent=`${FILTERED.length} ${FILTERED.length===1?'celebrity':'celebrities'}`;const bits=[];if(search.value)bits.push(`Search: "${search.value}"`);if(country.value)bits.push(`Country: ${country.value}`);activeFilters.textContent=bits.join(' • ');}
    function populateCountries(items){const codes=new Map();for(const it of items){codes.set(it.country,it.flag);}const opts=['<option value="">All countries</option>'];[...codes.entries()].sort((a,b)=>a[0].localeCompare(b[0])).forEach(([n,c])=>{opts.push(`<option value="${n}" data-flag="${c}">${n}</option>`)});country.innerHTML=opts.join('');}
    function attachRevealObserver(){if(!io){io=new IntersectionObserver((entries)=>{entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');io.unobserve(e.target);}})},{threshold:0.18});}els('.card:not(.visible)',grid).forEach(c=>io.observe(c));}
    function maybeLoadMoreOnScroll(){if(loadingMore)return;const scrolled=window.scrollY+window.innerHeight,full=document.documentElement.scrollHeight;if(full-scrolled<SCROLL_LOAD_OFFSET&&renderIndex<FILTERED.length){loadingMore=true;loadingIndicator.style.display='block';setTimeout(()=>{renderNextChunk();},250);}}
    function wireUI(){let t=null;search.addEventListener('input',()=>{clearTimeout(t);t=setTimeout(applyFilters,180);});country.addEventListener('change',applyFilters);resetBtn.addEventListener('click',()=>{search.value='';country.value='';applyFilters();});window.addEventListener('scroll',()=>{const y=window.scrollY||document.documentElement.scrollTop;toTop.classList.toggle('visible',y>600);maybeLoadMoreOnScroll();});toTop.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));yearEl.textContent=new Date().getFullYear();}
    async function init(){wireUI();try{loadingIndicator.style.display='block';const res=await fetch(DATA_URL);if(!res.ok)throw new Error('Failed to load');const payload=await res.json();DATA=Array.isArray(payload)?payload:(payload.celebrities||[]);populateCountries(DATA);FILTERED=[...DATA];if(FILTERED.length===0){empty.style.display='block';}else{empty.style.display='none';renderNextChunk();}}catch(err){console.error(err);empty.style.display='block';empty.textContent='Failed to load celebrities data.';}finally{loadingIndicator.style.display=(renderIndex<FILTERED.length)?'block':'none';}}
    init();

    // ---- AD SCRIPT ----
    document.addEventListener("DOMContentLoaded", function () {
      const modal=document.getElementById("adModal"),video=document.getElementById("adVideo"),closeBtn=document.getElementById("adClose"),skipBtn=document.getElementById("adSkip"),timerEl=document.getElementById("adTimer");
      let skipCountdown,closeDelay;const reopenInterval=3*60*1000;
      function openAd(){modal.style.display="flex";modal.setAttribute("aria-hidden","false");video.currentTime=0;video.muted=true;video.play().catch(()=>{});closeBtn.style.display="none";if(closeDelay)clearTimeout(closeDelay);closeDelay=setTimeout(()=>{closeBtn.style.display="block";},3000);skipBtn.disabled=true;let remaining=5;timerEl.textContent=remaining;skipBtn.textContent=`Skip in ${remaining}s`;if(skipCountdown)clearInterval(skipCountdown);skipCountdown=setInterval(()=>{remaining-=1;if(remaining<=0){clearInterval(skipCountdown);skipBtn.disabled=false;skipBtn.textContent="Skip";}else{timerEl.textContent=remaining;}},1000);}
      function closeAd(){modal.style.display="none";modal.setAttribute("aria-hidden","true");video.pause();}
      closeBtn.addEventListener("click",closeAd);skipBtn.addEventListener("click",()=>{if(!skipBtn.disabled)closeAd();});video.addEventListener("ended",closeAd);
      openAd();setInterval(openAd,reopenInterval);
    });
  </script>
</body>
</html>


